<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
  <title>Powered by SaleMove</title>

  <link rel="stylesheet" href="stylesheets/styles.css" />
  <link rel="stylesheet" href="stylesheets/pygment_trac.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<div class="wrapper">
  <header>
  </header>
<section>



<h1 id="operator-public-api">Operator public API.</h1>
<p>The operator’s public API comprises a set of HTTP REST endpoints that can be used from the browser, command line, a server application, or other devices.</p>

<h2 id="headers">Headers</h2>
<p>In order to use the REST API, every request needs to include at least 2 headers: the  <code>Authorization</code> and the <code>Accept</code>.</p>

<h3 id="authorization">Authorization</h3>
<p>Every request needs to include either the operator <code>SessionId</code> or <code>ApiToken</code>. It is recommended to use the API token which you can request to our support team. The API token is assigned per operator and currently only operators with manager privileges have the token enabled.</p>

<h4 id="api-token-example">API token example</h4>
<p>The following is an example of a curl request which inclues the API token:</p>

<pre><code>curl -i https://api.salemove.com/engagements --header "Authorization: ApiToken MY_SECRET_API_TOKEN"
</code></pre>

<p>Example with javascript:</p>

<pre><code>$.ajax({
  type: 'GET',
  url: 'https://api.salemove.com/engagements',
  headers: {
    'Authorization': 'ApiToken MY_SECRET_API_TOKEN'
  },
  success: function(response){
      ajaxResponse = response;
  }
});
</code></pre>

<h3 id="accept-token">Accept token</h3>

<p>The API version must be explicitly set in every request via the <code>Accept</code> header.</p>

<pre><code>Accept: application/vnd.salemove.v1+json
</code></pre>

<h1 id="rest-api">REST API</h1>

<h2 id="list-engagements">List engagements</h2>

<pre><code>GET /enagements
</code></pre>

<p>Fetches a collection of all engagements that the current manager has access to configure. The manager needs to have access to the site to be able to fetch an engagement from there. The collection is paginated and sorted by ID (ascending).</p>

<ul>
  <li>
    <p>Response 200 (application/json)</p>

    <pre><code>{
  'last_page': 'https://api.salemove.com/engagements?page=2',
  'next_page': 'https://api.salemove.com/engagements?page=2',
  'engagements': [
    {
      "href": "https://api.salemove.com/engagements/1",
      "duration": 30,
      "operators": [
        {
          "href": "https://api.salemove.com/operators/4"
        }
      ],
      "visitor": {
        "href": "https://api.salemove.com/visitors/1"
      },
      "chat_transcript":
      {
        "href": "https://api.salemove.com/engagements/1/chat_trascript"
      }
    },
    {
      "href": "https://api.salemove.com/engagements/2",
      "duration": 30,
      "operators": [
        {
          "href": "https://api.salemove.com/operators/5"
        }
      ],
      "visitor": {
        "href": "https://api.salemove.com/visitors/6"
      },
      "chat_transcript":
      {
        "href": "https://api.salemove.com/engagements/2/chat_trascript"
      }
    }
  ]
}
</code></pre>
  </li>
</ul>

<h2 id="get-single-engagement">Get single engagement</h2>

<pre><code>GET /enagements/:engagement_id
</code></pre>

<p>Fetches an engagement. The manager needs to have access to the site that the engagement belongs to.</p>

<ul>
  <li>
    <p>Response 200 (application/json)</p>

    <pre><code>{
  "href": "https://api.salemove.com/engagements/2",
  "duration": 30,
  "operators": [
    {
      "href": "https://api.salemove.com/operators/4"
    }
  ],
  "visitor": {
    "href": "https://api.salemove.com/visitors/1"
  },
  "chat_transcript":
  {
    "href": "https://api.salemove.com/engagements/2/chat_trascript"
  }
}
</code></pre>
  </li>
</ul>

<h2 id="get-engagement-chat-transcript">Get engagement chat transcript</h2>

<pre><code>GET /enagements/:engagement_id/chat_transcript
</code></pre>

<p>Fetches the engagements chat transcript. The manager needs to have access to the site that the engagement belongs to.</p>

<ul>
  <li>
    <p>Response 200 (application/json)</p>

    <pre><code>[
  {
    "message": "This",
    "created_at": "2015-03-20T14:21:09.475Z",
    "sender": {
      "href": "https://api.salemove.com:visitors/1",
      "name": null,
      "type": "visitor"
    }
  },
  {
    "message": "is",
    "created_at": "2015-03-20T14:21:09.475Z",
    "sender": {
      "href": "https://api.salemove.com:operators/4",
      "name": "Kalle Kaalikas",
      "type": "operator"
    }
  },
  {
    "message": "chat",
    "created_at": "2015-03-20T14:21:09.475Z",
    "sender": {
      "href": "https://api.salemove.com:operators/5",
      "name": 'Kalle Kaalikas',
      "type": 'operator'
    }
  }
]
</code></pre>
  </li>
</ul>

<h2 id="get-visitor-by-id">Get visitor by id</h2>

<pre><code>GET /visitors/:visitor_id
</code></pre>

<p>Fetches the engagements chat transcript. The manager needs to be able to have access to the site that the visitor visited.</p>

<ul>
  <li>
    <p>Response 200 (application/json)</p>

    <pre><code>{
  "href": "https://api.salemove.com/visitors/1",
  "name": 'John',
  "email": 'test@email.com',
  "phone": '55443322',
  "note": 'some random dude',
  "custom_attributes": {
    # These are custom fields, which you can define yourself. Those shown below are just examples
    ...
    "home_address": 'Winston',
    "vip": "true"
  }
}
</code></pre>
  </li>
</ul>

<h2 id="list-operators">List operators</h2>

<pre><code>GET /operators
</code></pre>

<p>Fetches an operator that the manager can manage and configure. The manager needs to have access to the site in order to fetch the site’s operators.</p>

<ul>
  <li>
    <p>Response 200 (application/json)</p>

    <pre><code>{
  'last_page': 'https://api.salemove.com/operators?page=2',
  'next_page': 'https://api.salemove.com/operators?page=1',
  'operators': [
    {
      "href": "https://api.salemove.com/operators/4",
      "name": 'Manager',
      "email": 'manager@email.com',
      "phone": '55443322',
      "available": true,
      "role": 'manager'
    },
    {
      "href": "https://api.salemove.com/operators/5",
      "name": 'John',
      "email": 'test@email.com',
      "phone": '55443322',
      "available": true,
      "role": 'operator'
    }
  ]
}
</code></pre>
  </li>
</ul>

<h2 id="get-an-operator">Get an operator</h2>

<pre><code>GET /operators/:operator_id
</code></pre>

<p>Lists all the operators that the manager can manage and configure. The manager needs to have access to the site in order to fetch the site’s operators. The collection is paginated and sorted by ascending ID.</p>

<ul>
  <li>
    <p>Response 200 (application/json)</p>

    <pre><code>{
  "href": "https://api.salemove.com/operators/4",
  "name": 'Manager',
  "email": 'manager@email.com',
  "phone": '55443322',
  "available": true,
  "role": 'manager'
}
</code></pre>
  </li>
</ul>

<h3 id="update-an-operator">Update an operator</h3>

<pre><code>PATCH /operators/:operator_id
</code></pre>

<ul>
  <li>
    <p>Request body</p>

    <pre><code>  {
    "name": 'Merry John',
    "email": 'some@new.email',
    "phone": '999993333',
    "available": false,
  }
</code></pre>
  </li>
  <li>
    <p>Response 200 (application/json)</p>

    <pre><code>  {
    "href": "https://api.salemove.com/operators/5",
    "name": 'Merry John',
    "email": 'some@new.email',
    "phone": '999993333',
    "available": false,
    "role": 'operator'
  }
</code></pre>
  </li>
</ul>


</section>
<aside id="sidebar">
  <h1>Operator API</h1>
    <p class="view"><a href="https://github.com/salemove/developer">View the Project on GitHub <small>salemove/developer</small></a></p>

  <h2><a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore=""></a><a href="index.html">Overview</a></h2>
  <ul class="js-guides">
    <li><a href="operator.html">Operator</a></li>
    <li><a href="visitor.html">Visitor</a></li>
  
  


      <footer>
        <p>This project is maintained by <a href="https://github.com/salemove">SaleMove</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>

</ul></aside></div>
